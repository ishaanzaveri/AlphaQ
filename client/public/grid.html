<!DOCTYPE html>
<html>
    <head>
        <title>freewall demo getting started</title>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
            integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script src="./freewall.js"></script>
    </head>
    <body>
        <div id="freewall" class="free-wall container"></div>
        <script>
            function load_img(url) {
                var img = new Image();
                $(img)
                    .on("load", function () {
                        const w = this.width;
                        console.log(w);
                        $(".container").append(
                            $(`<div class="brick" style="width:` + w + `px"></div>`).append(
                                $(this).width("100%")
                            )
                        );
                    })
                    .attr({
                        src: url,
                    });
            }

            load_img("https://picsum.photos/100/150");
            load_img("https://picsum.photos/120/50");
            load_img("https://picsum.photos/150");
            load_img("https://picsum.photos/130/75");
            load_img("https://picsum.photos/170/80");

            $(window).on("load", function () {
                wall.fitWidth();
            });

            var wall = new Freewall("#freewall");
            wall.reset({
                selector: ".brick",
                animate: false,
                cellW: 150,
                cellH: "auto",
                onResize: function () {
                    wall.fitWidth();
                },
            });

            var images = wall.container.find(".brick");
        </script>
    </body>
</html>
